// Скрипт для добавления 10 стартовых вопросов в Firebase
// Импортируйте этот файл в main.jsx или запустите отдельно

import { addQuestion, getCategories } from "./firestoreService";

const STARTER_QUESTIONS = [
  {
    categoryName: "Жизнь",
    text: "Лучше жить в городе или в деревне?",
    optionA: "В городе - больше возможностей",
    optionB: "В деревне - спокойнее и здоровее",
    majorityReason:
      "Город предлагает больше работы, развлечений, образования и социальных возможностей. Подавляющее большинство выбирает городскую жизнь благодаря инфраструктуре и потенциалу карьеры.",
    minorityReason:
      "Деревня дает близость к природе, низкий стресс и более здоровый образ жизни. Часть людей ценит это больше, чем городские удобства.",
  },
  {
    categoryName: "Деньги",
    text: "Важнее зарабатывать много денег или иметь свободное время?",
    optionA: "Зарабатывать много денег",
    optionB: "Иметь свободное время",
    majorityReason:
      "Большинство считает, что деньги необходимы для обеспечения базовых потребностей и безопасности. Без них невозможна нормальная жизнь.",
    minorityReason:
      "Меньшинство верит, что время - самый ценный ресурс. Деньги могут быть потеряны, но потерянное время вернуть невозможно.",
  },
  {
    categoryName: "Работа",
    text: "Работать для себя или в большой компании?",
    optionA: "Работать в большой компании",
    optionB: "Работать для себя (фриланс/свой бизнес)",
    majorityReason:
      "Большинство предпочитает стабильность, социальные пакеты и регулярную зарплату, которые предлагает крупная компания. Это снижает риск.",
    minorityReason:
      "Часть людей выбирает свободу, независимость и потенциал больших доходов при работе на себя, несмотря на нестабильность.",
  },
  {
    categoryName: "Отношения",
    text: "Лучше быть в отношениях или независимым?",
    optionA: "В отношениях",
    optionB: "Независимым",
    majorityReason:
      "Большинство ценит любовь, партнерство, поддержку и эмоциональную связь в отношениях. Человек - социальное существо.",
    minorityReason:
      "Меньшинство предпочитает полную свободу и независимость без обязательств перед другим человеком.",
  },
  {
    categoryName: "Технологии",
    text: "Смартфон улучшил или ухудшил нашу жизнь?",
    optionA: "Улучшил - это огромный прогресс",
    optionB: "Ухудшил - слишком много проблем",
    majorityReason:
      "Большинство согласны, что смартфоны революционизировали коммуникацию, образование и доступ к информации. Преимущества очевидны.",
    minorityReason:
      "Часть людей беспокоится об аддикции, потере конфиденциальности и снижении реальных социальных контактов.",
  },
  {
    categoryName: "Мнения",
    text: "Можно ли менять мнение или нужно придерживаться своих убеждений?",
    optionA: "Нужно придерживаться убеждений",
    optionB: "Нужно быть готовым менять мнение",
    majorityReason:
      "Большинство считает, что способность менять мнение на основе новых данных - это признак интеллигентности и роста.",
    minorityReason:
      "Меньшинство верит, что нужно иметь твердые принципы и придерживаться их, несмотря на давление.",
  },
  {
    categoryName: "Будущее",
    text: "Кто более счастлив: молодые или пожилые люди?",
    optionA: "Молодые - у них впереди вся жизнь",
    optionB: "Пожилые - они достигли мудрости",
    majorityReason:
      "Большинство считает молодость счастливее из-за энергии, новых возможностей и меньшего количества прошлых сожалений.",
    minorityReason:
      "Часть людей верит, что пожилые счастливее благодаря мудрости, опыту и спокойствию, которые приходят с возрастом.",
  },
  {
    categoryName: "Личность",
    text: "Интроверт или экстраверт - кто счастливее?",
    optionA: "Экстравертный - общение дарит радость",
    optionB: "Интровертный - тишина дарит радость",
    majorityReason:
      "Большинство считает, что социальное взаимодействие и наличие большого круга друзей способствуют счастью.",
    minorityReason:
      "Часть людей убеждена, что уединение, рефлексия и глубокие отношения приносят больше счастья.",
  },
  {
    categoryName: "Жизнь",
    text: "Нужно ли искать смысл жизни или просто жить?",
    optionA: "Искать смысл - это важно",
    optionB: "Просто жить - не нужно усложнять",
    majorityReason:
      "Большинство верит, что у жизни должен быть смысл и цель. Это мотивирует и дает направление.",
    minorityReason:
      "Часть людей считает, что философия - это перегрев мозга, и нужно просто наслаждаться моментом.",
  },
  {
    categoryName: "Деньги",
    text: "Нужно ли жертвовать деньги на благотворительность?",
    optionA: "Да, помогать нуждающимся",
    optionB: "Нет, сначала себя обеспечить",
    majorityReason:
      "Большинство согласны, что помощь нуждающимся - это нравственный долг и часть того, чтобы быть хорошим человеком.",
    minorityReason:
      "Часть людей считает, что сначала нужно обеспечить себя и свою семью, а потом думать о других.",
  },
];

export const addStarterQuestions = async () => {
  try {
    // Получить все категории
    const categories = await getCategories();
    const categoryMap = {};

    // Создать map для быстрого поиска ID категории по названию
    categories.forEach((cat) => {
      categoryMap[cat.name] = cat.id;
    });

    let addedCount = 0;

    // Добавить каждый вопрос
    for (const question of STARTER_QUESTIONS) {
      const categoryId = categoryMap[question.categoryName];

      if (!categoryId) {
        console.warn(`Категория "${question.categoryName}" не найдена`);
        continue;
      }

      try {
        await addQuestion({
          category: categoryId,
          text: question.text,
          optionA: question.optionA,
          optionB: question.optionB,
          majorityReason: question.majorityReason,
          minorityReason: question.minorityReason,
        });

        addedCount++;
        console.log(`✅ Добавлен вопрос: "${question.text}"`);
      } catch (err) {
        console.error(`❌ Ошибка при добавлении вопроса: "${question.text}"`, err);
      }
    }

    console.log(
      `\n✅ Успешно добавлено ${addedCount} из ${STARTER_QUESTIONS.length} вопросов`
    );
    return addedCount;
  } catch (error) {
    console.error("Ошибка при добавлении стартовых вопросов:", error);
    throw error;
  }
};
